{% extends "article.html" %}
{% block article %}
<h1>[微信-微博]树洞教程</h1>
<p>同样基于SAE,使用Python实现。你得有一个SAE帐号、微信公众平台帐号和一个微博帐号。<br />
    首先使用你那个微博帐号进入到<a href="http://open.weibo.com">微博开发平台</a>，登录后要去完善开发者信息，通过邮箱认证等。再在<a href="http://open.weibo.com/development">这里</a>选择创建应用，选择网页应用即可。<br />
<!--more-->
然后出现的表格都可以随便填，不过“应用名称”不能和已有的相同。创建后到<a href="http://open.weibo.com/apps">这里</a>，点击进入你的应用，点击左边的应用信息，把<code>Appkey</code>和<code>AppSecret</code>先记录下来。点击左边的高级信息，点编辑，“授权回调页”写<code>http://boyqiang520.s8.csome.cn/oauth2/</code>，“取消授权回调页”什么也不写，保存。然后打开<code>https://api.weibo.com/oauth2/authorize?redirect_uri=http://boyqiang520.s8.csome.cn/oauth2/&amp;response_type=code&amp;client_id=【1】&amp;display=default</code>，其中【1】替换为刚刚保存的<code>Appkey</code>，用你那个要做树洞的微博帐号授权后页面出现一个框，把框里的内容完整复制好记录下来。再打开<a href="http://yakiang.sinaapp.com/getToken">这个页面</a>，填入<code>appkey,appsecret</code>和<code>code</code>，其中<code>code</code>就是刚刚那个框里面的那串内容。提交后如果没有错误就看到两行字，先别关页面，把我这份<a href="{{%20root_url%20}}/file/th-weibo.rar">文件</a>下载后解压。里面有个<code>index.wsgi</code>，把第一行字填进这份文件第29行的引号内，把第二行字填进第30行，26和27行数据自己也补上。<br />
然后同样到<a href="http://sae.sina.com.cn/?m=myapp&amp;a=create">sae</a>创建新应用，二级域名随便写但要记住，应用名称随便写，开发语言选python。然后点击顶端“我的应用”，到你刚刚创建的应用的页面，左边栏选择“代码管理”，“创建一个版本”，默认名称为1就好。然后点击编辑代码（可能需要输入密码）进入到深蓝色那个面板。点开左边的<code>config.yaml</code>，把内容都删掉后把刚刚解压开来的文件<code>config.yaml</code>的内容复制上去，点击保存。再把面板上的<code>index.wsgi</code>右键删掉，把刚刚解压开来的另外两个文件（<code>index.wsgi</code>和<code>weibo.py</code>）上传上去（黄色箭头）。点击全部保存后可以关掉页面，回到刚刚点击“代码管理”的地方，现在点击左边栏下面的<code>storage</code>，点击新建一个domain，<code>domain name</code>写<code>pics</code>，然后下面都不写也不勾，点击创建。用同样方法再建一个domain名为<code>weiboid</code>，也就是需要两个domain。<br />
然后去<a href="http://mp.weixin.qq.com">微信公众平台</a>，登录后进入“高级功能”，点击开发模式（使用前可能需要先去编辑模式那里把它关了），修改接口配置信息，URL就写刚刚sae的应用地址，比如<code>http://xxxx.sinaapp.com</code>，token随便写。提交，如果返回绿色消息就是提交成功了。<br />
至此微信-微博树洞就搭好了。功能有：发布文字和图片微博；对最近五条微博进行匿名评论和转发。<br />
刚刚微博应用那些其他基本应用信息（比如应用图标之类）可以不用去管它，而且不要去审核（所以发出的微博“尾巴”会是“未通过审核应用”）。<br />
如果你成功了，希望你能评论中留下你的学校名称。如果失败了也可以留言或者发邮件我。 <br />
<br><br><br>
2013-10-13 更新：<br />
如果你不想折腾又想建树洞，而且愿意付费，欢迎找我 --- QQ 六七四六九一九三五  </p>
{% endblock %}
